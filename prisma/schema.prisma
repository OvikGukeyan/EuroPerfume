generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id               Int               @id @default(autoincrement())
  fullName         String
  email            String            @unique
  password         String
  role             UserRole          @default(USER)
  verified         DateTime?
  provider         String?
  providerId       String?
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  cart             Cart?
  favorites        Favorites?
  orders           Order[]
  verificationCode VerificationCode?
  Review           Review[]
}

model Category {
  id            Int            @id @default(autoincrement())
  name          String         @unique
  products      Product[]
  productGroups ProductGroup[]
}

model ProductGroup {
  id         Int       @id @default(autoincrement())
  name       String    @unique
  products   Product[]
  category   Category  @relation(fields: [categoryId], references: [id])
  categoryId Int
}

model Product {
  id             Int               @id @default(autoincrement())
  name           String
  imageUrl       String[]
  categoryId     Int
  productGroupId Int
  brand          Brands
  description    String
  gender         Gender
  classification Classifications[]

  age                 Int?
  series              String?
  purpose             Purpose?
  colorPalette        String?
  finish              Finish?
  texture             Texture?
  formula             Formula?
  compositionFeatures String?
  activeIngredients   String?
  effect              Effects?
  effectDuration      Int?
  hypoallergenic      Boolean?
  certificates        String?
  ethics              String?
  applicationMethod   ApplicationMethod?
  packagingFormat     PackagingFormat?
  volume              String?
  skinType            SkinType?

  topNotes      Notes[]               @default([])
  heartNotes    Notes[]               @default([])
  baseNotes     Notes[]               @default([])
  aromas        Aromas[]              @default([])
  concentration PerfumeConcentration?
  perfumer      String?

  price                Int
  releaseYear          Int
  brandCountry         String
  manufacturingCountry String

  available      Boolean
  cartItems      CartItem[]
  favoritesItems FavoritesItem[]
  category       Category             @relation(fields: [categoryId], references: [id])
  productGroup   ProductGroup         @relation(fields: [productGroupId], references: [id])
  translations   ProductTranslation[]
  reviews        Review[]
  variations     ProductVariation[]
  createdAt      DateTime             @default(now())
  updatedAt      DateTime             @updatedAt
}

model ProductVariation {
  id        Int         @id @default(autoincrement())
  name      String
  imageUrl  String
  productId Int
  product   Product     @relation(fields: [productId], references: [id], onDelete: Cascade)
  CartItem  CartItem[]
  OrderItem OrderItem[]
}

model ProductTranslation {
  id          Int       @id @default(autoincrement())
  language    Languages
  description String
  productId   Int
  product     Product   @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([language, productId], name: "translation_unique")
}

model Cart {
  id          Int        @id @default(autoincrement())
  userId      Int?       @unique
  token       String
  totalAmount Int        @default(0)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  user        User?      @relation(fields: [userId], references: [id], onDelete: Cascade)
  items       CartItem[]
}

model CartItem {
  id          Int               @id @default(autoincrement())
  cartId      Int
  quantity    Int               @default(1)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  productId   Int
  variationId Int?
  cart        Cart              @relation(fields: [cartId], references: [id])
  variation   ProductVariation? @relation(fields: [variationId], references: [id], onDelete: Cascade)
  product     Product           @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model Favorites {
  id        Int             @id @default(autoincrement())
  userId    Int?            @unique
  token     String
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  user      User?           @relation(fields: [userId], references: [id], onDelete: Cascade)
  items     FavoritesItem[]
}

model FavoritesItem {
  id          Int       @id @default(autoincrement())
  favoritesId Int
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  productId   Int
  favorites   Favorites @relation(fields: [favoritesId], references: [id], onDelete: Cascade)
  product     Product   @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model Review {
  id        Int      @id @default(autoincrement())
  productId Int
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  userId    Int
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  text      String
  rating    Int
  replye    Reply?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Reply {
  id        Int      @id @default(autoincrement())
  reviewId  Int      @unique
  review    Review   @relation(fields: [reviewId], references: [id], onDelete: Cascade)
  text      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Order {
  id           Int           @id @default(autoincrement())
  userId       Int?
  token        String
  totalAmount  Int
  status       OrderStatus
  peymentId    String?
  items        OrderItem[]
  fullName     String
  address      String
  email        String
  phone        String
  comment      String?
  deliveryType DeliveryTypes
  contactForm  ContactForms
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  user         User?         @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model OrderItem {
  id          Int               @id @default(autoincrement())
  name        String
  quantity    Int
  variationId Int?
  variation   ProductVariation? @relation(fields: [variationId], references: [id])
  orderId     Int
  order       Order             @relation(fields: [orderId], references: [id], onDelete: Cascade)
}

model VerificationCode {
  id        Int      @id @default(autoincrement())
  userId    Int      @unique
  code      String
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, code])
}

model Slide {
  id         Int    @id @default(autoincrement())
  name       String
  desctopImg String
  tabletImg  String
  mobileImg  String
  href       String
}

enum OrderStatus {
  PENDING
  SUCCEEDED
  CENCELLED
}

enum UserRole {
  USER
  ADMIN
}

enum Gender {
  MALE
  FEMALE
  UNISEX
}

enum PerfumeConcentration {
  EXTRAIT
  PERFUME
  EAU_DE_PARFUM
  EAU_DE_TOILETTE
  EAU_DE_COLOGNE
}

enum Notes {
  CITRUS
  FLORAL
  GREEN
  FRUITY
  SPICY
  WOODY
  ORIENTAL
  MUSK
  AQUATIC
  BERGAMOT
  LEMON
  ORANGE
  MANDARIN
  GRAPEFRUIT
  YUZU
  LIME
  NEROLI
  VIOLET_LEAF
  GALBANUM
  PETITGRAIN
  GREEN_APPLE
  MINT
  GINGER
  RHUBARB
  BLACK_CURRANT
  WATERMELON
  CUCUMBER
  BASIL
  TARAGON
  ROSEMARY
  LAVENDER
  TEA
  ALDEHYDES
  SAFRON
  CARDAMOM
  PETITGREY
  SAFFRON
  ROSE
  JASMINE
  LILY_OF_THE_VALLEY
  IRIS
  TUBEROSE
  ORANGEBLOSSOM
  NARCISSUS
  PEONY
  VIOLET
  MAGNOLIA
  GARDENIA
  RASPBERRY
  PEACH
  APPLE
  PLUM
  PEAR
  HONEY
  CINNAMON
  CLAVY
  PEPPER
  COCOA
  COFFEE
  COCONUT
  RUM
  RED_BERRIES
  ANISE
  LIQUORICE
  PASSIONFRUIT
  VANILLA
  AMBER
  PATCHOULI
  VETIVER
  SANDALWOOD
  CEDAR
  MUSK_DUP
  TONKA_BEANS
  LABDANUM
  RESINS
  OAK_MOSS
  TOBACCO
  LEATHER_DUP
  FIG
  CHOCOLATE
  BENZOIN
  MYRRH
  OPOPONAX
  CASHMERAN
  NAGARMOTA
  CIVET
  CASTOREUM
  SAFFRON_DUP
  OUD
  INCENSE
  SPICES
  WOODY_NOTES
  SUGAR
  CARAMEL
  CASHMERE
}

enum Classifications {
  NICHE
  ARABIAN
  DESIGNER
  CELEBRITY
  INDIE
  PROFESSIONAL
  LUXURY
  MASS_MARKET
}

enum Brands {
  AEADESVENUSTAS
  AETHER
  AFFINESSENCE
  AGAR_AURA
  AKRO
  ALEXANDRIA_FRAGRANCES
  ALEXANDRE_J
  ALLSAINTS
  AMOUAGE
  ANDREA_MAACK
  ANDY_TAUER
  ANIMA_MUNDI
  ANNICK_GOUTAL
  APRIL_AROMATICS
  ARMANI
  ARMANI_PRIVE
  ATELIER_COLOGNE
  ATELIER_DES_ORS
  ATKINSONS
  AURA_CONCEPT
  AVESTAN
  BDK_PARFUMS
  BEAUFORT_LONDON
  BERDOUES
  BIEHL_PARFUMKUNSTWERKE
  BJORK_AND_BERRIES
  BOADICEA_THE_VICTORIOUS
  BOGUE_PROFUMO
  BOIS_1920
  BON_PARFUMEUR
  BOND_NO_9
  BORTNIKOFF
  BRUNO_FAZZOLAR
  BY_KILIAN
  BYREDO
  CALVIN_KLEIN
  CARTIER
  CACHAREL
  CARON
  CARNER_BARCELONA
  CASAMORATI
  CHABAUD_MAISON_DE_PARFUM
  CHANEL
  CHANEL_LES_EXCLUSIFS
  CHRIS_COLLINS
  CLIVE_CHRISTIAN
  COMME_DES_GARCONS_PARFUM
  CREED
  CREED_VINTAGE
  DS_AND_DURGA
  DAME_PERFUMERY
  DASEIN
  DAVID_JOURQUIN
  DEAR_POLLY
  DIOR
  DIOR_LA_COLLECTION_PRIVEE
  DIPTYQUE
  DIXIT_AND_ZAK
  DRIES_VAN_NOTEN
  DR_VRANJES
  DUSITA
  E_COUDRAY
  EAU_DITALIE
  ELECTIMUSS
  ELDO
  ELLIS_BROOKLYN
  EMBRUNS
  ENSAR_OUD
  ERBARIO_TOSCANO
  ESCENTRIC_MOLECULES
  EX_IDOLO
  EX_NIHILO
  FACONNABLE
  FARMACIA_SS_ANNUNZIATA
  FILIPPO_SORCINELLI
  FLORIS_LONDON
  FORT_AND_MANLE
  FRANCESCA_BIANCHI
  FREDERIC_MALLE
  FUEGUIA_1833
  GALLIVANT
  GANACHE_PARFUMS
  GIORGIO_ARMANI_PRIVÃ‰
  GIARDINO_BENESSERE
  GIVENCHY
  GOUTAL_PARIS
  GRITTI
  GUERLAIN_EXCLUSIVE
  GUERLAIN_LES_ABSOLUS_D_ORIENT
  GUCCI
  HEELEY
  HENRY_JACQUES
  HERMETICA
  HIRAM_GREEN
  HISTOIRES_DE_PARFUMS
  HUGO_BOSS_PRIVATE
  IMAGINARY_AUTHORS
  INITIO_PARFUMS
  ISABEY
  ISSEY_MIYAKE
  JACQUES_FATH
  JAMES_HEELEY
  JARDIN_DE_ECRIVAINS
  JAZMIN_SARAI
  JEAN_CLAUDE_ELLENA
  JEANNE_EN_PROVENCE
  JEROBOAM
  JERSEY
  JOVOY_PARIS
  JUL_ET_MAD
  KEROSENE
  KILIAN
  KRIGLER
  L_ARTISAN_PARFUMEUR
  LA_VIA_DEL_PROFUMO
  LABORATORIO_OLFATTIVO
  LANCOME
  LE_GALION
  LE_JARDIN_RETROUVE
  LES_INDEMODABLES
  LES_LIQUIDES_IMAGINAIRES
  LIQUIDES_IMAGINAIRES
  LOEWE
  LUBIN
  LVNEA
  L_ORCHESTRE_PARFUM
  MAISON_CRIVELLI
  MAISON_FRANCIS_KURKDJKIAN
  MAISON_LANCOME
  MAISON_MARGIELA_REPLICA
  MAISON_MARTIN_MARGIELA
  MAISON_REBATCHI
  MAISON_TAHITE
  MAJDA_BEKKALI
  MANCERA
  MANOS_GERAKINIS
  MARC_ANTOINE_BARROIS
  MARIA_CANDIDA_GENTILE
  MARISSA_ZAPPAS
  MARK_BUXTON
  MASQUE_MILANO
  MATIERE_PREMIERE
  MDCI_PARFUMS
  MEMO_PARIS
  MENDITTOROSA
  MILLER_HARRIS
  MIYA_SHINMA
  MONTALIE
  MONOGRAPH
  MORESQUE
  MUGLER_LES_EXCEPTIONS
  MYRRE_AND_DELIRES
  NARCISO_RODRIGUEZ
  NASOMATTO
  NICOLAI_PARFUMEUR_CREATEUR
  NISHANE
  NOTE_DI_PROFUMUM
  ODRIU
  OLFACTIVE_STUDIO
  OLIBERE_PARFUMS
  ORMONDE_JAYNE
  ORMONDE_JAYNE_MONTABACO
  ORMONDE_MAN
  OSCAR_DE_LA_RENTA
  OSMOFOLIA
  P_SEVEN
  PACO_RABANNE
  PARFUM_D_EMPIRE
  PARFUM_D_ORSAY
  PARFUMS_DE_MARLY
  PARFUMS_DUSITA
  PARFUMS_MDCI
  PARLE_MOI_DE_PARFUM
  PEKJI
  PENHALIGONS
  PERRIS_MONTE_CARLO
  PHUONG_DANG
  PIERRE_GUILLAUME
  PINEWARD_PERFUMES
  PRISSANA
  PROFUMUM_ROMA
  PUREDISTANCE
  QUARTANA
  RAMON_MONEGAL
  RANIA_J
  REGIME_DES_FLEURS
  ROBERT_PIGUET
  ROJA_DOVE
  ROOM_1015
  ROYAL_CROWN
  SALVATORE_FERRAGAMO
  SALLE_PRIVEE
  SANTA_MARIA_NOVELLA
  SANTI_BURGAS
  SCENTRIQUE
  SERGE_LUTENS
  SIXTEEN92
  SLUMBERHOUSE
  STEPHANE_HUMBERT_LUCAS_777
  STRANGERS_PARFUMERIE
  STORA_SKUGGAN
  SULTAN_PASHA_ATTARS
  TAUER_PERFUMES
  THE_DIFFERENT_COMPANY
  THE_HOUSE_OF_OUD
  THE_NUE_CO
  TOM_DAXON
  TOM_FORD
  VERSACE
  YVES_SAINT_LAURENT
}

enum Purpose {
  FACE
  EYES
  LIPS
  BODY
}

enum Finish {
  MATTE
  GLOSSY
  SATIN
  METALLIC
  SHIMMER
}

enum Texture {
  CREAMY
  GEL
  POWDERY
  LIQUID
}

enum Formula {
  LONG_LASTING
  HYDRATING
  LIGHT
  WATERPROOF
  NON_COMEDOGENIC
}

enum Effects {
  HYDRATING
  VOLUMIZING
  TONE_BALANCING
  DEFINING
  SMOOTHING
  MATIFYING
  ILLUMINATING
  ANTIAGING
}

enum ApplicationMethod {
  BRUSH
  APPLICATOR
  FINGERS
  BOTTLE
  PENCIL
}

enum PackagingFormat {
  STICK
  PENCIL
  TUBE
  BOTTLE
  JAR
}

enum SkinType {
  ALL
  DRY
  OILY
  SENSITIVE
}

enum Languages {
  RU
  DE
}

enum DeliveryTypes {
  GB
  ES
  PBH
}

enum ContactForms {
  WA
  VB
  TG
}

enum Aromas {
  FOUGERE
  WOODY
  ORIENTAL
  FLORAL
  CITRUS
  CHYPRE
  LEATHER
  AQUATIC
  GREEN
  GOURMAND
  ANIMALIC
  METALLIC
  MILKY
  MUSKY
  OZONE
  ORIENTAL_AMBER
  SPICY
  POWDERY
  SWEET
  RESINOUS
  MARITIME
  TOBACCO
  ALDHYDE
  AROMATIC
  COFFEE
  CARAMEL
  CHOCOLATE
  DUSTY
  EARTHY
  FRUITY
}
